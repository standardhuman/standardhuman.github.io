
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flex Panels ðŸ’ª</title>
  <link href="https://fonts.googleapis.com/css?family=Amatic+SC" rel="stylesheet" type="text/css">
</head>
<body>
  <style>
    html {
      box-sizing: border-box;
      background: #ffc600;
      font-family:'helvetica neue';
      font-size: 20px;
      font-weight: 200;
    }
    body {
      margin: 0;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }
    .panels {
      min-height:100vh;
      overflow: hidden;
      display: flex;
    }
    /* .panel p {
      text-transform: uppercase;
      font-family: 'Amatic SC', cursive;
      text-shadow:0 0 4px rgba(0, 0, 0, 0.72), 0 0 14px rgba(0, 0, 0, 0.45);
      font-size: 2em;
      border: white solid 2px;
    } */
    .panel {
      background:#6B0F9C;
      box-shadow:inset 0 0 0 5px rgba(255,255,255,0.1);
      color:white;
      text-align: center;
      align-items:center;
      /* Safari transitionend event.propertyName === flex */
      /* Chrome + FF transitionend event.propertyName === flex-grow */
      transition:
        font-size 0.7s cubic-bezier(0.61,-0.19, 0.7,-0.11),
        flex 0.7s cubic-bezier(0.61,-0.19, 0.7,-0.11),
        background 0.2s;
      font-size: 20px;
      background-size:cover;
      background-position:center;
      flex: 1;
      justify-content: center;
      display: flex;
      flex-direction: column;
      min-height: auto;
    }
    .panel1 { }
    .panel2 { }
    .panel3 { }
    .panel4 { }
    .panel5 { }

    /* Flex Items */
    .panel > * {
      margin:0;
      width: 100%;
      transition:transform 0.5s;
      flex: 1 0 auto;
      display:flex;
      justify-content: center;
      align-items: center;
      /* transform: translateY(750%); */
    }

    .panel p:nth-child(2) {
      font-size: 4em;
    }
    .panel.open {
      border: red solid 5px;
      flex: 8;
    }
    .header {
      border: solid red 2px;
      flex: 1;
      transform: translateY(-100%);
    }
    .header.open {
      transform: translateY(0%);
    }
    .title {
      border: solid green 2px;
      flex: 1;
    }
    .title.open {
      transform: translateY(-50%)
    }
    .bod {
      border: solid blue 2px;
      flex: 1;
      transform: translateY(200%);
    }
    .bod.open {
      transform: translateY(0);
    }
  </style>


  <div class="panels">
    <div class="all panel panel1">
      <p class="all header">header</p>
      <p class="all title">title</p>
      <p class="all bod">bod</p>
    </div>
    <div class="all panel panel2">
      <p class="all header">header</p>
      <p class="all title">title</p>
      <p class="all bod"><!-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed finibus ante arcu, vestibulum porta nibh malesuada a. Proin volutpat mi sit amet ligula laoreet tristique. Fusce ultricies felis eget erat tempor, non blandit ex consequat. Cras lacinia leo sit amet orci pharetra, fermentum cursus sem tempor. Aliquam pulvinar nisl vitae sem laoreet, nec iaculis orci rutrum. Vestibulum cursus purus risus. Nunc dapibus sapien sem, eget viverra magna rutrum et. Quisque sodales enim non dolor venenatis, a auctor nibh vulputate. Nulla in euismod ligula. Suspendisse potenti.

      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed finibus ante arcu, vestibulum porta nibh malesuada a. Proin volutpat mi sit amet ligula laoreet tristique. Fusce ultricies felis eget erat tempor, non blandit ex consequat. Cras lacinia leo sit amet orci pharetra, fermentum cursus sem tempor. Aliquam pulvinar nisl vitae sem laoreet, nec iaculis orci rutrum. Vestibulum cursus purus risus. Nunc dapibus sapien sem, eget viverra magna rutrum et. Quisque sodales enim non dolor venenatis, a auctor nibh vulputate. Nulla in euismod ligula. Suspendisse potenti.

      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed finibus ante arcu, vestibulum porta nibh malesuada a. Proin volutpat mi sit amet ligula laoreet tristique. Fusce ultricies felis eget erat tempor, non blandit ex consequat. Cras lacinia leo sit amet orci pharetra, fermentum cursus sem tempor. Aliquam pulvinar nisl vitae sem laoreet, nec iaculis orci rutrum. Vestibulum cursus purus risus. Nunc dapibus sapien sem, eget viverra magna rutrum et. Quisque sodales enim non dolor venenatis, a auctor nibh vulputate. Nulla in euismod ligula. Suspendisse potenti. END -->
      </p>
    </div>
    <div class="all panel panel3">
      <p class="all header">header</p>
      <p class="all title">title</p>
      <p class="all bod">bod</p>
    </div>
  </div>

  <script>
    const alls = document.querySelectorAll('.all');

    function toggleOpenPanels(e){
      //check if target parent panel is open and closes if so.
      // check if target parent panel has open
      if((e.target.classList.contains('open')) || (e.target.parentElement.classList.contains('open'))){
        console.log("Target or ParentElement contains .open");
        e.target.parentElement.classList.remove('open')
        for (var child in e.target.parentElement.children) {
          if (e.target.parentElement.children.hasOwnProperty(child)) {
            e.target.parentElement.children[child].classList.remove('open')
          }
        }
      }else{
        // remove open from all other elements
        alls.forEach(all => all.classList.remove('open'))
        // loop through kids and add open to each one
        for(let child in e.target.parentElement.children){
            if(e.target.parentElement.children.hasOwnProperty(child)){
            // e.target.parentElement.children[child].classList.add('open')
            e.target.classList.add('open')
          }
        }
        // add open to parent panel
        console.log("e.target.classList:", e.target.classList);
        console.log("e.target.parentElement.classList:", e.target.parentElement.classList);
        console.log("Attempting to add open to: ", e.target.classList);
        e.target.classList.add('open')
        e.target.parentElement.classList.add('open')
        e.stopPropagation()
    }
        e.stopPropagation()
  }

    alls.forEach(all => all.addEventListener('click', toggleOpenPanels))

  </script>

</body>
</html>
